!function(t,e){"use strict";let s=0;const n={galleryKey:"slfs",pro:!1,scanBody:!0,settingsUrl:""},r=Object.assign({},n,SLFS_CONFIG||{}),o=String(r.galleryKey),c=/\.(jpe?g|png|gif|webp|avif|bmp|svg)(\?.*)?$/i,a=/\.(mp4|webm|ogv|ogg)(\?.*)?$/i;let i={},u=null,l=null,f=0,h=0,p=0;function m(s){const r=Array.isArray(s.cssClassesToSearch)&&s.cssClassesToSearch.length?s.cssClassesToSearch:n.cssClassesToSearch;i.forEach((s=>{const n=s.closest("figure");n&&r.some((t=>n.classList.contains(t)))&&("IMG"===s.tagName?function(t){const s=t.closest("a");if(s){if(s.classList.contains("wp-lightbox"))return;if(!d(s.getAttribute("href")))return;return void s.setAttribute("data-fslightbox",o)}const n=function(t){const e=t.closest("figure");if(e){const t=e.querySelector("a[href]");if(t&&d(t.getAttribute("href")))return t.getAttribute("href")}const s=t.getAttribute("srcset");if(s){const t=s.split(",").map((t=>{const[e,s]=t.trim().split(" ");return{url:e,size:parseInt(s,10)||0}})).reduce(((t,e)=>e.size>t.size?e:t),{size:0});if(t.url)return t.url}return t.currentSrc?t.currentSrc:t.src?t.src:null}(t);if(!n)return;const r=e.createElement("a");r.setAttribute("data-fslightbox",o),r.setAttribute("href",n),r.setAttribute("data-type","image"),r.setAttribute("aria-label","Open fullscreen lightbox with current image"),t.replaceWith(r),r.appendChild(t)}(s):"VIDEO"===s.tagName?function(t){const e=t.closest("a");if(e&&e.classList.contains("wp-lightbox"))return;const s=t.currentSrc||t.getAttribute("src");if(!s)return;const n=t.parentElement,r=y(s,{"data-type":"video"});t.poster&&r.setAttribute("data-video-poster",t.poster);n.appendChild(r),g(t,"▶",(()=>r.click()))}(s):"IFRAME"===s.tagName&&function(e){const s=function(e){if(!e)return null;try{const s=new URL(e,t.location.href),n=s.hostname;if(s.pathname.includes("/embed/")){return"https://www.youtube.com/watch?v="+s.pathname.split("/embed/")[1].split("/")[0]}if(/^(.+\.)?youtu\.be$/i.test(n)){return"https://www.youtube.com/watch?v="+s.pathname.replace(/^\/+/,"").split("/")[0]}return/youtube\.com$/i.test(n)&&s.searchParams.has("v")?s.origin+s.pathname+s.search:null}catch(t){return null}}(e.src);if(!s)return;const n=e.parentElement,r=y(s,{"data-type":"youtube"});n.appendChild(r),g(e,"▶",(()=>r.click()))}(s))})),"function"==typeof t.refreshFsLightbox&&t.refreshFsLightbox()}function d(t){return c.test(t||"")||a.test(t||"")}function b(e){if(!e||"string"!=typeof e)return e;let s;try{s=new URL(e,t.location.href)}catch(t){return e}let n=null;const r=s.pathname.match(/\/embed\/([^/?#]+)/i);if(r&&(n=r[1]),!n&&s.searchParams.has("v")&&(n=s.searchParams.get("v")),!n&&/(^|\.)youtu\.be$/i.test(s.hostname)){const t=s.pathname.split("/").filter(Boolean);t.length&&(n=t[0])}n&&(s.pathname=`/embed/${n}`,s.searchParams.delete("v"));return(/(^|\.)youtube\.com$/i.test(s.hostname)||/(^|\.)youtube-nocookie\.com$/i.test(s.hostname)||/(^|\.)youtu\.be$/i.test(s.hostname))&&(s.hostname="www.youtube-nocookie.com"),s.searchParams.has("enablejsapi")||s.searchParams.set("enablejsapi","1"),s.toString()}function g(s,n,r){const o=s.parentElement;if(!o)return;if(!o.classList.contains("slfs-ovl-wrap")){o.classList.add("slfs-ovl-wrap");"static"===t.getComputedStyle(o).position&&(o.style.position="relative")}const c=e.createElement("button");c.type="button",c.className="slfs-ovl-btn",c.textContent=n,c.addEventListener("click",(t=>{t.preventDefault(),r()})),o.appendChild(c)}function y(t,s={}){const n=e.createElement("a");n.setAttribute("data-fslightbox",o),n.setAttribute("href",t);for(const[t,e]of Object.entries(s))n.setAttribute(t,e);return n.classList.add("slfs-hidden-link"),n}function w(){const t=E();for(const e of t)(e.src.includes("youtube.com")||e.src.includes("youtube-nocookie.com"))&&e.contentWindow&&e.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*")}function v(){e.querySelectorAll("video").forEach((t=>{try{t.pause()}catch(t){}}))}function A(t){var e=t.elements.sources;s=t.stageIndexes.current;for(let t of e)if(t&&"IFRAME"===t.tagName){let e="";t.src.includes("enablejsapi")||(e=b(t.src),t.src=e),t.src.includes("youtube")&&!t.src.includes("nocookie")&&(e=t.src.replace("youtube","youtube-nocookie"),t.src=e)}try{w(),v()}catch(t){}}function S(t){w(),v()}function E(){return null!==u?u:Array.from(i).filter((t=>"IFRAME"===t.tagName))}function C(){const s=(r.scanBody,{cssClassesToSearch:r.cssClassesToSearch,scanBody:!0===r.scanBody}),n=e.body;if(i=n.querySelectorAll("img, video, iframe"),f=i.length,0!==f){u=E(),h=u.length,l=null!==l?l:Array.from(i).filter((t=>"VIDEO"===t.tagName)),p=l.length,h&&function(){u=E();for(const t of u)(t.src.includes("youtube.com")||t.src.includes("youtube-nocookie.com"))&&(t.src=b(t.src))}(),m(s);try{const e=t.fsLightboxInstances[o];e&&e.props&&(h>0||p>0)&&(e.props.onOpen=A,e.props.onSlideChange=S)}catch(t){}}}t.addEventListener("load",(()=>{setTimeout(C,0)}))}(window,document);